---
- name: "module_tower_notification"
  hosts: all
  # hosts: localhost, Define the --limit localhost.
  # connection: Define the variable ansible_connection in the inventory
  # become: Define the variable ansible_become in the inventory
  # gather_facts: Define the variable ansible_gather_facts in the inventory
  vars:
    tower_notification: 
      message_from: "{{ tower_notification_message_from | default(omit, True) }}"
      color: "{{ tower_notification_color | default(omit, True) }}"
      channels: "{{ tower_notification_channels | default(omit, True) }}"
      from_number: "{{ tower_notification_from_number | default(omit, True) }}"
      rooms: "{{ tower_notification_rooms | default(omit, True) }}"
      notification_type: "{{ tower_notification_notification_type | default(omit, True) }}"
      tower_username: "{{ tower_notification_tower_username | default(omit, True) }}"
      use_ssl: "{{ tower_notification_use_ssl | default(omit, True) }}"
      service_key: "{{ tower_notification_service_key | default(omit, True) }}"
      server: "{{ tower_notification_server | default(omit, True) }}"
      notification_configuration: "{{ tower_notification_notification_configuration | default(omit, True) }}"
      port: "{{ tower_notification_port | default(omit, True) }}"
      api_url: "{{ tower_notification_api_url | default(omit, True) }}"
      client_name: "{{ tower_notification_client_name | default(omit, True) }}"
      targets: "{{ tower_notification_targets | default(omit, True) }}"
      use_tls: "{{ tower_notification_use_tls | default(omit, True) }}"
      state: "{{ tower_notification_state | default(omit, True) }}"
      subdomain: "{{ tower_notification_subdomain | default(omit, True) }}"
      username: "{{ tower_notification_username | default(omit, True) }}"
      description: "{{ tower_notification_description | default(omit, True) }}"
      recipients: "{{ tower_notification_recipients | default(omit, True) }}"
      tower_host: "{{ tower_notification_tower_host | default(omit, True) }}"
      host: "{{ tower_notification_host | default(omit, True) }}"
      to_numbers: "{{ tower_notification_to_numbers | default(omit, True) }}"
      tower_password: "{{ tower_notification_tower_password | default(omit, True) }}"
      tower_config_file: "{{ tower_notification_tower_config_file | default(omit, True) }}"
      password: "{{ tower_notification_password | default(omit, True) }}"
      nickname: "{{ tower_notification_nickname | default(omit, True) }}"
      sender: "{{ tower_notification_sender | default(omit, True) }}"
      name: "{{ tower_notification_name | default(omit, True) }}"
      url: "{{ tower_notification_url | default(omit, True) }}"
      account_token: "{{ tower_notification_account_token | default(omit, True) }}"
      account_sid: "{{ tower_notification_account_sid | default(omit, True) }}"
      headers: "{{ tower_notification_headers | default(omit, True) }}"
      token: "{{ tower_notification_token | default(omit, True) }}"
      organization: "{{ tower_notification_organization | default(omit, True) }}"
      validate_certs: "{{ tower_notification_validate_certs | default(omit, True) }}"
      notify: "{{ tower_notification_notify | default(omit, True) }}"
  tasks:
    - name: "plugin_tower_notification"
      tower_notification: "{{ tower_notification }}"
      register: r_tower_notification

    - name: "export r_tower_notification"
      set_stats:
        data:
          r_tower_notification: "{{ r_tower_notification }}"
